<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:f="http://xmlns.jcp.org/jsf/core"
		xmlns:p="http://primefaces.org/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<h:outputStylesheet library="css" name="style.css"></h:outputStylesheet>

<title>Cadastro Pessoa</title>
</h:head>
<h:body>

	<h1>Informações de Pessoas</h1>
	<h:form id="form">
		<p:panel header="Cadastro de Pessoas">
			<h:panelGrid columns="3">
				<p:outputLabel value="Código:" />
				<p:inputText value="#{pessoaBean.pessoa.id}" disabled="#{pessoaBean.estadoTela eq 'editar'}"></p:inputText>
				<br />
				<br />

				<p:outputLabel value="Nome:" />
				<p:inputText value="#{pessoaBean.pessoa.nome}"></p:inputText>
				<br />
				<br />

				<p:outputLabel value="Endereço:" />
				<p:inputText value="#{pessoaBean.pessoa.endereco}"></p:inputText>
				<br />
				<br />

				<p:outputLabel value="Telefone:" />
        		<p:inputMask value="#{pessoaBean.pessoa.telefone}" mask="(99) 99999-9999"/>
				<br />
				<br />
				<p:commandButton action="#{pessoaBean.salvar}" value="Salvar"
					update="form tabelaPessoa"></p:commandButton>
			</h:panelGrid>
		</p:panel>
 		<h1>Lista de Pessoas</h1>
 		<p:dataTable value="#{pessoaBean.pessoas}" var="p" border="1" id="tabelaPessoa">
 			<p:column headerText="Código">#{p.id}</p:column>
 			<p:column headerText="Nome">#{p.nome}</p:column>
 			<p:column headerText="Telefone">#{p.telefone}</p:column>
 			<p:column headerText="Endereço">#{p.endereco}</p:column>
 			<p:column headerText="Ações">
 				<p:commandButton icon="ui-icon-pencil" action="#{pessoaBean.alterar(p)}" value="Alterar" update="form tabelaPessoa">
  					<f:setPropertyActionListener value="#{p}" target="#{pessoaBean.pessoa}"></f:setPropertyActionListener>
 				</p:commandButton>
 				<p:commandButton icon="ui-icon-trash" action="#{pessoaBean.excluir(p)}" value="Excluir" update="form tabelaPessoa">
					<f:setPropertyActionListener value="#{p}" target="#{pessoaBean.pessoa}"></f:setPropertyActionListener>
 				</p:commandButton>
 			</p:column>
 		</p:dataTable>
		
	</h:form>
</h:body>
</html>